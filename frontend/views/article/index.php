<!-- Header
================================================== -->
<header id="header-top">
    <div class="row header-row-top hed-all-bg bg-header-top-article">
        <div class="con-hd">
            <div class="left-header txt-right">
                <div class="wr-txt-header">
                    <!--  Help Phone   -->
                    <?= yii\base\View::render('@frontend/views/phone/_phone_help'); ?>
                    <h1 class="BebasNeueBold header-color title-problem-header">
                        Статьи
                        <!--  SVG   -->
                        <span class="wr-svg-header">
                        <svg xmlns="http://www.w3.org/2000/svg" class="svg-slider-category" viewBox="0 0 122 122">
  <g fill="none" stroke="#363840" transform="translate(-1878 -1855)">
    <g transform="translate(1879 1856)">
      <path d="M0,60 C4.05812251e-15,93.137085 26.862915,120 60,120 C93.137085,120 120,93.137085 120,60 C120,26.862915 93.137085,2.02906125e-15 60,0 C26.862915,-2.02906125e-15 4.05812251e-15,26.862915 0,60"/>
      <path d="M33.1632787,25.5737705 C31.1567213,25.5737705 29.5081967,27.7062295 29.5081967,30.2636066 L29.5081967,89.3586885 C29.5081967,91.9504918 31.1557377,94.0504918 33.1632787,94.0504918 L91.6465574,94.0504918 L91.6465574,94.0180328 L91.7468852,94.0180328 C91.7734426,94.0180328 91.7990164,94.0180328 91.8236066,93.9865574 C91.8501639,93.9865574 91.8757377,93.9865574 91.9022951,93.9521311 C93.5744262,93.5586885 94.8885246,91.657377 94.8885246,89.3606557 L94.8885246,46.924918 C94.8885246,44.367541 93.2144262,42.235082 91.2078689,42.235082 L88.1704918,42.235082 L88.1704918,30.262623 C88.1704918,27.7052459 86.4983607,25.5727869 84.4918033,25.5727869 L33.1622951,25.5727869 L33.1632787,25.5737705 Z M87.9993443,44.8918033 L90.3747541,44.8918033 C91.342623,44.8918033 92.127541,46.1085246 92.127541,47.6439344 L92.127541,89.0340984 C92.127541,90.5714754 91.3406557,91.8177049 90.3767213,91.8177049 L90.1337705,91.8177049 C89.8918033,91.7862295 89.6321311,91.6898361 89.3291803,91.4636066 C88.684918,90.9521311 88.0013115,89.8662295 88.0013115,86.5396721 L88.0013115,44.8937705 L87.9993443,44.8918033 Z M36.397377,83.0655738 L55.495082,83.0655738 L55.495082,82.8137705 L36.2695082,82.8137705 L36.2695082,83.0665574 L36.397377,83.0665574 L36.397377,83.0655738 Z M36.397377,78.0078689 L55.495082,78.0078689 L55.495082,77.755082 L36.2695082,77.755082 L36.2695082,78.0088525 L36.397377,78.0088525 L36.397377,78.0078689 Z M36.397377,72.9481967 L55.495082,72.9481967 L55.495082,72.6954098 L36.2695082,72.6954098 L36.2695082,72.9481967 L36.397377,72.9481967 Z M36.397377,67.8895082 L55.495082,67.8895082 L55.495082,67.6377049 L36.2695082,67.6377049 L36.2695082,67.8904918 L36.397377,67.8904918 L36.397377,67.8895082 Z M49.0445902,60.0501639 L68.1422951,60.0501639 L68.1422951,59.7963934 L48.9167213,59.7963934 L48.9167213,60.0491803 L49.0445902,60.0491803 L49.0445902,60.0501639 Z M61.9455738,83.0665574 L81.0442623,83.0665574 L81.0442623,82.8147541 L61.8167213,82.8147541 L61.8167213,83.067541 L61.9445902,83.067541 L61.9455738,83.0665574 Z M61.9455738,78.0088525 L81.0442623,78.0088525 L81.0442623,77.7560656 L61.8167213,77.7560656 L61.8167213,78.0098361 L61.9445902,78.0098361 L61.9455738,78.0088525 Z M61.9455738,72.9491803 L81.0442623,72.9491803 L81.0442623,72.6963934 L61.8167213,72.6963934 L61.8167213,72.9491803 L61.9445902,72.9491803 L61.9455738,72.9491803 Z M61.9455738,67.8904918 L81.0442623,67.8904918 L81.0442623,67.6386885 L61.8167213,67.6386885 L61.8167213,67.8914754 L61.9445902,67.8914754 L61.9455738,67.8904918 Z M48.2213115,33.6432787 C47.8613115,33.7091803 47.5770492,34.135082 47.5770492,34.5934426 L47.5770492,50.2357377 C47.5770492,50.727541 47.9114754,51.1544262 48.2980328,51.1544262 L69.3786885,51.1544262 C69.7406557,51.1544262 70.1006557,50.7285246 70.1006557,50.2357377 L70.1006557,34.5934426 C70.1006557,34.1016393 69.7386885,33.6422951 69.3777049,33.6422951 L48.2213115,33.6422951 L48.2213115,33.6432787 Z"/>
    </g>
  </g>
</svg>
                         </span>
                    </h1>

                    <h3>Для мужчин и женщин</h3>
                </div>
            </div>
            <div class="right-header">
            </div>
            <?= yii\base\View::render('@frontend/views/site/share'); ?>
            <!--  Breadcrumbs   -->
            <div id="breadcrumbs-wr">
                <nav class="breadcrumbs" itemscope="" itemtype="http://schema.org/BreadcrumbList">
                    <ol class="cd-multi-steps">
                        <li class="visited" itemprop="itemListElement" itemscope
                            itemtype="https://schema.org/ListItem">
                            <a href="/" itemprop="item" title="Главная">
                                <span itemprop="name">Главная</span>
                                <meta itemprop="position" content="1">
                            </a>
                            <span class="cd-multi-steps-line">|</span>
                        </li>

                        <li class="current" itemprop="itemListElement" itemscope
                            itemtype="https://schema.org/ListItem">
                            <a href="/statyi" itemprop="item" title="Статьи">
                                <span itemprop="name">Статьи</span>
                                <meta itemprop="position" content="2">
                            </a>
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</header>
<!--Empty Block-->
<div class="row">
    <div class="empty-block-section"></div>
</div>
<!-- Main Section
================================================== -->
<section>
    <div class="row">
        <div class="container container-bg-gray">
            <div class=" art-wr-con">
                <!--Wrapper Container-->
                <div class="article-it-l">

                    <!--Wrapper-List-->
                    <div class="art-it grid-article">

                        <?php foreach ($model AS $m): ?>
                            <div class="item-art block-animate gridItem">
                                <div class="picture">
                                    <div class="l-art-img">
                                        <img class="full-img transition-all-ease"
                                             src="<?= $m->imageDir . $m->id . '/' . $m->img_big ?>"
                                             alt="<?= $m->title ?>">
                                        <div class="wr-btn-art">
                                            <a class="art-btn vertical-center" href="/statyi/<?= $m->slug ?>">Перейти
                                            </a>
                                        </div>
                                    </div>
                                    <div class="r-art-txt txt-center position-relative">

                                        <div class="txt-left">
                                            <a href="/statyi/<?= $m->slug ?>">
                                                <h2 class="after-line h-art"><?= $m->title ?></h2>
                                            </a>

                                            <p><?= $m->lead ?></p>
                                        </div>
                                        <div class="data-art">
                                            <span class="date-nws"><?= $m->date ?></span>
                                            <span class="tlt-item-art"><?= $m->types[$m->type] ?></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--End-->
                        <?php endforeach; ?>
                    </div>
                    <div class="txt-center row comments-btn-f">
    <span id="more" class="modal-btn-more">
        Показать ещё
    </span>
                    </div>
                </div>
            </div>
        </div>
</section>
<!--Empty Block-->
<div class="row">
    <div class="empty-block-section"></div>
</div>

<?php
$script = <<< JS
var grid = document.querySelector(".grid-article");
var masonry = new TinyMasonry(grid);
   var svgHeader = $('.wr-svg-header svg');
    pathPrepareCssAll(svgHeader);
    setTimeout(function () {
        startAnimationSvgHeader(svgHeader);

    }, 100);
    
    var page = 1;
    //console.log(masonry);
$('#more').click(function() {
  $.ajax({
            url: '/articles?page=' + page,
            type: 'get',
            success: function (response) {
              
              if(response){
                response = JSON.parse(response)
                for(i=0;i<response.length;++i){
                  var item = document.createElement("div")
                  item.className = 'item-art block-animate gridItem'
                  item.innerHTML = response[i];
                  masonry.items.push(item)
                }
                masonry.update();
                page++ 	
                var controllerAnimatSection = new ScrollMagic.Controller();

              $(".block-animate").each(function (index, elem) {
                  new ScrollMagic.Scene({
                  triggerElement: elem,
                  triggerHook: 0.85,
                  reverse: false
                  }).on('start', function () {
                 $(elem).addClass('visible');
              }).addTo(controllerAnimatSection);
    });
              } else {
                $('#more').hide();
              }
            
            }
        });
});

JS;
$this->registerJs($script, yii\web\View::POS_READY);
?>
<?php
$this->registerJsFile('/js/tiny-masonry-gh-pages/tiny-masonry.min.js', ['depends' => 'frontend\assets\AppAsset', 'defer' => 'defer']);
//$this->registerJsFile('/js/article.js', ['depends' => 'frontend\assets\AppAsset', 'defer' => 'defer']);
?>
